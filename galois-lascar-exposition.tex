\documentclass[letterpaper,twoside]{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}{Lemma}[theorem]
\newtheorem{corollary}{Corollary}[theorem]

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}

\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}

\newcommand{\defterm}[1]{\emph{#1}}

\renewcommand{\emptyset}{\varnothing}
\DeclareMathOperator{\tp}{tp}
\DeclareMathOperator{\sym}{sym}
\newcommand{\elsubeq}{\preceq}

\title{Exposition of \(Gal_L(T)\)}
\author{Mike Haskel}
\date{Summer 2014}

\begin{document}
\maketitle

\section{Introduction}

The purspose of this writeup is to construct \(Gal_L(T)\) without
making any arbitrary choices, such as selecting a large saturated
model.

\section{Bounded, \(Aut\)-Invariant Equivalences}

In this section, I will construct the Lascar equivalence relation in
terms of types.

\begin{definition}
  Let \(T\) be a complete theory.  An \(n\)-ary \defterm{relation
    present in \(T\)} is a subset of \(S_n(T/\emptyset)\).  For any
  \(R\) a relation present in \(T\), \(a_1,\ldots,a_n\) in an
  appropriate context, say that \(R(a_1,\ldots,a_n)\) holds just if
  \(\tp(a_1,\ldots,a_n) \in R\).
\end{definition}

This definition corresponds to the usual definition of an
automorphism-invariant relation.

\begin{proposition}
  Let \(\mathcal{U}\) be a sufficiently large model.  An \(n\)-ary
  relation \(R\) on this model is automorphism-invariant iff it arises
  as a relation present in \(T\).
\end{proposition}
\begin{proof}
  Let \(R\) be a relation present in \(T\), \(f \in
  Aut(\mathcal{U})\), and \(a\in \mathcal{U}^n\).  Since \(f\) is an
  automorphism, \(\tp(a) = \tp(f(a))\).  Therefore \(R(a)\) iff
  \(R(f(a))\), so \(R\) is automorphism-invariant.

  Let \(R\) be an automorphism-invariant relation on
  \(\mathcal{U}^n\), and let \(a,b \in \mathcal{U}^n\) have the same
  type.  Since \(\mathcal{U}\) is sufficiently homogeneous, there is
  an automorphism \(f\) with \(f(a) = b\).  Since \(R\) is
  automorphism-invariant, \(R\) agrees on \(a\) and \(b\).  Therefore
  whether \(R\) holds of a tuple depends only on the tuple's type, so
  \(R\) arises as a type present in \(T\).
\end{proof}

We can define reflexivity, symmetry, and transitivity of a binary
relation present in \(T\) without referencing any models.

\begin{definition}
  Let \(R(x,y)\) be a binary relation present in \(T\).  \(R\) is
  \defterm{reflexive} if \([x = y] \subseteq R\), where \([x = y]\) is
  the filter generated by the given formula, viewed as a (closed) set
  of types.
\end{definition}

\begin{proposition}
  Let \(R(x,y)\) be a binary relation present in \(T\).  \(R\) is
  reflexive iff it yields a reflexive relation in all models, iff it
  yields a reflexive relation in a sufficiently large model.
\end{proposition}
\begin{proof}
  Let \(R(x,y)\) be a reflexive relation present in \(T\), \(M \models
  T\), and \(a \in M\).  Since \(\tp(a,a) \in [x = y] \subseteq R\),
  \(R(a,a)\).  Therefore \(R\) yields a reflexive relation in all models.

  Let \(R(x,y)\) be a relation present in \(T\) which is not
  reflexive.  Let \(\mathcal{U} \models T\) be sufficiently large.
  Since \(R\) is not reflexive, take \(p(x,y) \in [x = y]\) with \(p
  \notin R\).  Since \(\mathcal{U}\) is sufficiently saturated, take
  \(a,b \in \mathcal{U}\) with \(\mathcal{U} \models p(a,b)\).  Since
  \(p \in [x = y]\), \(a = b\).  However, since \(p \notin R\), \(\neg
  R(a,b)\).  Therefore \(R\) does not yield a reflexive relation in
  \(\mathcal{U}\).
\end{proof}

\begin{definition}
  Let \(R(x,y)\) be a binary relation present in \(T\).  \(R\) is
  \defterm{symmetric} if, for all \(p(x,y) \in R\), \(p(y,x) \in R\).
\end{definition}

\begin{proposition}
  Let \(R(x,y)\) be a binary relation present in \(T\).  \(R\) is
  symmetric iff it yields a symmetric relation in all models, iff it
  yields a symmetric relation in a sufficiently large model.
\end{proposition}
\begin{proof}
  Let \(R(x,y)\) be a symmetric relation present in \(T\), \(M \models
  T\), and \(a,b \in M\) with \(R(a,b)\).  Set \(p(x,y) = \tp(a,b)\).
  Since \(\tp(b,a) = p(y,x) \in R\), \(R(b,a)\).  Therefore \(R\)
  yields a symmetric relation in \(M\).

  Let \(R(x,y)\) be a binary relation present in \(T\) which is not
  symmetric.  Let \(\mathcal{U}\) be a sufficiently large model.
  Since \(R\) is not symmetric, take \(p(x,y) \in R\) with \(p(y,x)
  \notin R\).  Since \(\mathcal{U}\) is sufficiently saturated, take
  \(a,b \in \mathcal{U}\) with \(\tp(a,b) = p(x,y)\), so \(R(a,b)\).
  However, \(\tp(b,a) = p(y,x) \notin R\), so \(\neg R(b,a)\).
  Therefore \(R\) does not yield a symmetric relation in
  \(\mathcal{U}\).
\end{proof}

\begin{definition}
  Let \(R(x,y)\) be a binary relation present in \(T\).  \(R\) is
  \defterm{transitive} if, for all \(p(x,y), q(x,y) \in R\),
  \([p(x,z), q(z,y)]\restriction_{x,y} \subseteq R\), where \([p(x,z),
    q(z,y)]\restriction_{x,y}\) is the filter in \(x,y\) obtained by
  restricting the filter in \(x,y,z\) generated by the formulas in
  \(p(x,z)\) and \(q(z,y)\) to those formulas only mentioning \(x\)
  and \(y\).
\end{definition}

\begin{proposition}
  Let \(R(x,y)\) be a binary relation present in \(T\).  \(R\) is
  transitive iff it yields a transitive relation in all models, iff it
  yields a transitive relation in a sufficiently large model.
\end{proposition}
\begin{proof}
  Let \(R(x,y)\) be a transitive relation present in \(T\), \(M
  \models T\), \(a,b,c \in M\) with \(R(a,b)\) and \(R(b,c)\).  Set
  \(p(x,y) = \tp(a,b)\) and \(q(x,y) = \tp(b,c)\).  We know that \(p,q
  \in R\).  Furthermore, \(r(x,z,y) := \tp(a,b,c) \in [p(x,z),
    q(z,y)]\), so \(\tp(a,c) = r\restriction_{x,y} \in R\), and
  therefore \(R(a,c)\).  Therefore \(R\) yields a transitive relation
  in \(M\).

  Let \(R(x,y)\) be a binary relation present in \(T\) which is not
  transitive.  Let \(\mathcal{U}\) be a sufficiently large model.
  Since \(R\) is not transitive, take \(p(x,y), q(x,y) \in R\),
  \(r(x,z,y) \in [p(x,z), q(z,y)]\), with \(r\restriction_{x,y} \notin
  R\).  Since \(\mathcal{U}\) is sufficiently saturated, take \(a,b,c
  \in \mathcal{U}\) with \(\tp(a,b,c) = r\).  This implies that
  \(\tp(a,b) = p\) and \(\tp(b,c) = q\), so \(R(a,b)\) and \(R(b,c)\).
  However, since \(\tp(a,c) = r\restriction_{x,y}\), \(\tp(a,c) \notin
  R\) and \(\neg R(a,c)\).  Therefore \(R\) does not yield a
  transitive relation in \(\mathcal{U}\).
\end{proof}

For an equivalence relation present in \(T\), there is a purely
combinatorial definition of boundedness.  We want to say that an
equivalence relation is bounded if there aren't too many equivalence
classes.  Since an equivalence relation present in \(T\) is just a set
of types over the empty set, the ways in which elements can be in
different equivalence classes correspond to those types \emph{not} in
the relation.  By Ramsey theory, if there are too many inequivalent
elements, there are infinitely many elements inequivalent by the same
type.  By compactness, it is therefore possible to have arbitrarily
many elements inequivalent by this type.  This characterization is
formalized below.

\begin{definition}
  Let \(p(x,y) \in S_2(T)\).  Then \(\sym(p)\), the \defterm{symmetric
    closure} of \(p\), is \(\{p(x,y), p(y,x)\}\).  Since \(\sym(p)
  \subseteq S_2(T)\), \(\sym(p)\) is a (symmetric) relation present in
  \(T\).  Additionally, since \(\sym(p)\) is a finite set of points,
  it is closed, and therefore corresponds to a filter of formulas.
\end{definition}

\begin{definition}
  Let \(p(x,y) \in S_2(T)\).  \(\sym(p)\) is \defterm{graph-infinite}
  if \[[\sym(p)(x_i,x_j), x_i \neq x_j : i \neq j],\] a filter in the
  variables \(\{x_i\}_{i \in \omega}\), is consistent.
\end{definition}

\begin{proposition}\label{proposition-graphinfinite}
  Let \(p(x,y) \in S_2(T)\).  Then the following are equivalent:
  \begin{itemize}
  \item \(\sym(p)\) is graph-infinite;
  \item for some infinite \(\kappa\), there is a model with \(\kappa\)
    many elements pairwise related by \(\sym(p)\);
  \item for all infinite \(\kappa\), there is a model with \(\kappa\)
    many elements pairwise related by \(\sym(p)\); and
  \item for any \(\kappa\)-saturated model \(\mathcal{U}\), there are
    at least \(\kappa\) many elements of \(\mathcal{U}\) pairwise
    related by \(\sym(p)\).
  \end{itemize}
\end{proposition}
\begin{proof}
  This is an easy consequence of compactness.
\end{proof}

\begin{definition}
  Let \(xEy\) be an equivalence relation present in \(T\).  \(E\) is
  \defterm{bounded} if no \(p(x,y) \notin E\) is graph-infinite.
\end{definition}

This definition aligns with the traditional definition of boundedness.

\begin{proposition}\label{proposition-boundedasusual}
  Let \(xEy\) be an equivalence relation present in \(T\).  \(E\) is
  bounded iff, in a sufficiently large model \(\mathcal{U}\), the
  number of equivalence classes is strictly less than \(\kappa\),
  where \(\kappa\) is the saturation of \(\mathcal{U}\).
\end{proposition}
\begin{proof}
  (\(\Leftarrow\)) Assume that \(E\) is not bounded.  Then take
  \(p(x,y) \notin E\) graph-infinite.  By
  Proposition~\ref{proposition-graphinfinite}, there are \(\kappa\)
  many elements of \(\mathcal{U}\) pairwise related by \(\sym(p)\).
  Since \(p \notin E\), and since \(E\) is symmetric, \(\sym(p)\) is
  disjoint from \(E\).  Therefore we have found \(\kappa\) many
  pairwise inequivalent elements of \(\mathcal{U}\).

  (\(\Rightarrow\)) Let \(\tau = |S_2(T)|\).  By Ramsey theory, there
  is a least cardinal \(\lambda\) such that, for any coloring of the
  complete 2-graph with \(\lambda\) vertices and \(\tau\) colors,
  there is a complete, infinite, homogeneous subgraph.  Since
  \(\mathcal{U}\) is sufficiently large, in particular \(\kappa \geq
  \lambda\).

  Assume that there are at least \(\kappa\) equivalence classes in
  \(\mathcal{U}\).  Pick one representative from each of the \(\geq
  \kappa\) classes.  Consider each pair of representatives \(\{a,b\}\)
  ``colored'' by \(\sym(a,b) = \sym(b,a)\).  Since \(\kappa \geq
  \lambda\), there is an complete, infinite, homogeneous subgraph.
  That is, there is some graph-infinite \(\sym(p)\) with \(p \notin
  E\).  Therefore \(E\) is not bounded.
\end{proof}

\begin{corollary}\label{corollary-uniformboundonclasses}
  Let \(xEy\) be a bounded equivalence relation.  Then there is a
  cardinal \(\lambda\) such that all models have strictly fewer than
  \(\lambda\) equivalence classes.
\end{corollary}
\begin{proof}
  This is just the \(\lambda\) from the proof of
  Proposition~\ref{proposition-boundedasusual}.
\end{proof}

The definition of the Lascar equivalence relation, \(E_L\), of a
theory proceeds as usual.

\begin{definition}\label{definition-lascarequivalence}
  Let \(T\) be a complete theory.  The \defterm{Lascar equivalence
    relation}, \(E_L\), for that theory is the intersection (as sets
  of types) of all bounded equivalence relations.
\end{definition}

\begin{remark}\label{remark-relationintersection}
  It is clear that intersection of relations as sets of types
  corresponds with the usual intersection of relations in any model.
\end{remark}

\begin{proposition}
  For any theory, \(E_L\) is a bounded equivalence relation.
\end{proposition}
\begin{proof}
  From Remark~\ref{remark-relationintersection}, since a relation
  present in a theory is an equivalence relation iff it yields an
  equivalence relation in a sufficiently saturated model, and since
  the intersection of (usual) equivalence relations is an equivalence
  relation, \(E_L\) is an equivalence relation.  It remains to show
  that \(E_L\) is bounded.

  Assume that \(E_L\) is not bounded.  Then there is some \(p \notin
  E_L\) such that \(\sym(p)\) is graph-infinite.  Since \(E_L\) is the
  intersection of bounded equivalence relations, \(p \notin E\) for
  some bounded equivalence relation \(E\).  However, this contradicts
  \(\sym(p)\) being graph-infinite.
\end{proof}

Finally, this is all just an alternate exposition of the usual
definition.

\begin{theorem}
  The Lascar equivalence relation, as defined in
  Definition~\ref{definition-lascarequivalence}, induces the usual
  Lascar equivalence relation in any sufficiently large model
  \(\mathcal{U}\).
\end{theorem}
\begin{proof}
  This is a direct combination of the preceding results.
\end{proof}

\section{Maximally Distinct Parameter Sets}

In this section, let \(T\) be a complete theory and \(xEy\) be an
arbitrary bounded equivalence relation.  (We will focus later on the
special case of \(E_L\).)  We will discuss abstract parameter sets
without those parameters being in any specific model.  Since we will
nevertheless have enough to talk about types of these parameters,
\(E\) will yield an equivalence relation on a given parameter set.  We
will be interested in the case when these parameters are all from
distinct equivalence classes.  The boundedness of \(E\) will allow us
to extend elementarily any such parameter set into a maximal one.

\begin{definition}
  A \defterm{parameter set} is a set \(C\) of fresh constant symbols,
  and an associated extension of \(T\) to a complete theory in the
  language with these new symbols added.
\end{definition}

\begin{remark}
  If \(c\) is an \(n\)-tuple in some parameter set \(C\), the set of
  formulas \(\phi(x)\) in the original language which hold of \(c\) in
  the extended theory is a type in \(S_n(T)\).  Therefore any relation
  present in \(T\) yields a relation on any parameter set.
\end{remark}

\begin{definition}
  Let \(C, D\) be parameter sets.  Then \(C \elsubeq D\), that is,
  \(D\) is an \defterm{elementary extension} of \(C\), if \(C
  \subseteq D\) and the complete theory associated with \(D\) extends
  the complete theory associated with \(C\).
\end{definition}

\begin{remark}\label{remark-elsubisordinary}
  It is clear that elementary extension of parameter sets works very
  much like elementary extension of models.  In particular, it defines
  a partial order, and every chain has a least upper bound.
\end{remark}

\begin{definition}
  A parameter set is \defterm{\(E\)-distinct} if every element of the
  parameter set is in a distinct equivalence class.
\end{definition}

\begin{proposition}\label{proposition-maximalsexist}
  Let \(C\) be an \(E\)-distinct parameter set.  Then \(C\) extends
  elementarily into an (not necessarily canonical) \(E\)-distinct
  parameter set \(D\) that is maximal such.
\end{proposition}
\begin{proof}
  By Corollary~\ref{corollary-uniformboundonclasses}, we can assume
  without loss of generality that all parameter sets that matter have
  an underlying set that is a subset of some fixed cardinal
  \(\lambda\).  In particular, under this assumption, there is a set
  containing all parameter sets that matter.  We already have, from
  Remark~\ref{remark-elsubisordinary}, that every chain has a least
  upper bound.  The least upper bound of a chain of \(E\)-distinct
  parameter sets must also be \(E\)-distinct, since any pair of
  parameters occurs already somewhere in the chain.  Therefore Zorn's
  Lemma provides the desired result.
\end{proof}

\section{The Galois Groupoid}

In this section, \(T\) will again be a complete theory and \(xEy\) a
bounded equivalence relation present in \(T\).  There is a natural
connected groupoid associated with this equivalence relation.  The
hom-sets of this groupoid arise as projections of Stone spaces, and
the automorphism group of any object is isomorphic to the usual Galois
group associated with the relation.

\begin{definition}
  The \defterm{Galois groupoid} associated with \(E\), \(Gal_E(T)\),
  has as objects the maximal \(E\)-distinct parameter sets, and has
  hom-sets and compositions defined as follows.  For \(C, D\) objects,
  let \(S(T \cup C \cup D)\) denote the space of completions of the
  theories associated with \(C\) and \(D\) (with \(C\) and \(D\)
  viewed as disjoint sets of parameters).  By
  Lemma~\ref{lemma-galoisbijection}, under any theory in \(S(T \cup C
  \cup D)\), \(E \cap (C \times D)\) is a bijection from \(C\) to
  \(D\).  Define \(Hom(C,D)\) to be the bijections that arise in this
  way.  By Lemma~\ref{lemma-galoiscomposition}, the composition of two
  such bijections is in the relevant hom-set.  By
  Lemma~\ref{lemma-galoisidentity} and
  Lemma~\ref{lemma-galoisinverses}, respectively, \(Gal_E(T)\) has
  identities and inverses, and so is a groupoid.  By
  Lemma~\ref{lemma-galoisconnected}, \(Gal_E(T)\) is connected.
\end{definition}

\begin{lemma}\label{lemma-galoisbijection}
  Let \(C, D\) be maximal \(E\)-distinct parameter sets, and fix a
  complete theory in \(S(T \cup C \cup D)\).  Then, under this theory,
  \(E \cap (C \times D)\) is a bijection from \(C\) to \(D\).
\end{lemma}
\begin{proof}
  Let \(c \in C\).  It must be that \(cEd\) for at least one \(d \in
  D\); otherwise, \(D\) would not be maximally \(E\)-distinct.
  However, since no two \(d_1,d_2 \in D\) are equivalent, then \(cEd\)
  for \emph{exactly} one \(d \in D\).  Since this situation is
  symmetric in \(C\) and \(D\), \(E \cap (C \times D)\) is a
  bijection.
\end{proof}

\begin{lemma}\label{lemma-galoiscomposition}
  Let \(B,C,D\) be maximal \(E\)-distinct parameter sets, and let \(f
  \in Hom(B,C)\), \(g \in Hom(C,D)\).  Then \(gf \in Hom(B,D)\).
\end{lemma}
\begin{proof}
  Take \(p \in S(T \cup B \cup C)\), \(q \in S(T \cup C \cup D)\)
  yielding \(f\) and \(g\), respectively.  Consider the theory \([p,
    q] \subseteq S(T \cup B \cup C \cup D)\).  Note that both \(p\)
  and \(q\) restrict to the same theory in the language with constant
  symbols only from \(C\) (that is, the completion of \(T\) associated
  with the parameter set \(C\)).  The theory \([p,q]\) is therefore
  the extension of that theory with the new sentences from \(p\) and
  \(q\), each mentioning disjoint sets of new constants.  Since \(p\)
  and \(q\) are individually consistent, \([p,q]\) is consistent.
  Therefore there is some \(r \in S(B \cup C \cup D)\) extending both
  \(p\) and \(q\).  In this theory, \(E \cap (B \times D)\) is the
  composition of \(E \cap (C \times D)\) with \(E \cap (B \times C)\).
  Therefore the composition \(gf\) arises from \(r \restriction_{B
    \cup D}\), so \(gf \in Hom(B,D)\).
\end{proof}

\begin{lemma}\label{lemma-galoisidentity}
  Let \(C\) be a maximal \(E\)-distinct parameter set.  The identity
  function is in \(Hom(C,C)\).
\end{lemma}
\begin{proof}
  Take \(\{c_{1,\alpha}\}\) and \(\{c_{2,\alpha}\}\) the same
  enumeration of \(C_1\) and \(C_2\), two disjoint copies of \(C\).
  Consider the theory \([c_{1,\alpha} = c_{2,\alpha}] \subseteq S(T
  \cup C_1 \cup C_2)\).  This is clearly a complete, consistent theory
  which yields the identity function.
\end{proof}

\begin{lemma}\label{lemma-galoisinverses}
  Let \(C, D\) be maximal \(E\)-distinct parameter sets, and let \(f
  \in Hom(C,D)\).  Then \(f^{-1} \in Hom(D,C)\).
\end{lemma}
\begin{proof}
  Take \(p \in S(T \cup C \cup D) = S(T \cup D \cup C)\) such that,
  under \(p\), \(E \cap (C \times D)\) is \(f\).  Since \(E\) is
  symmetric, also under \(p\), \(E \cap (D \times C)\) is \(f^{-1}\).
\end{proof}

\begin{lemma}\label{lemma-galoisconnected}
  Let \(C,D\) be maximal \(E\)-distinct parameter sets.  Then
  \(Hom(C,D)\) is not empty.
\end{lemma}
\begin{proof}
  Note that \(S(T \cup C \cup D)\) is the extension of \(T\) by
  consistent theories mentioning disjoint sets of new parameters.
  \(S(T \cup C \cup D)\) is therefore consistent, so contains at least
  one point.  This point yields a morphism from \(C\) to \(D\).
\end{proof}

This concludes the combinatorial construction of the Galois groupoid
for any bounded equivalence relation present in a theory.  The
construction is completely canonical in that it does not rely on any
arbitrary choices, such as the choice of a sufficiently large model.
As such, for example, there should be no hindrance to converting this
construction into a functor between appropriate categories.
Furthermore, the construction makes explicit the relationship between
equivalence relations, the groupoids, and relevant Stone spaces, and
should facilitate investigations into topological structure.

Since the automorphism groups of objects in a connected groupoid are
all isomorphic, and since \(Gal_E(T)\) is nonempty, \(Gal_E(T)\)
determines a unique isomorphism class of groups.  The only remaining
business in this exposition is to show that this isomorphism class is
the same as the one obtained in the traditional, non-canonical
construction.

\begin{theorem}
  Let \(E\) be a bounded equivalence relation present in a complete
  theory \(T\), and let \(\mathcal{U} \models T\) be sufficiently
  large.  Let \(C\) be a maximal \(E\)-distinct parameter set.  Then
  there is a surjective group homomorphism from \(Aut(\mathcal{U})\)
  to \(Aut(C)\) whose kernel is exactly \(Fix(E)\), the automorphisms
  fixing \(E\)-equivalence classes.
\end{theorem}
\begin{proof}
  Since \(\mathcal{U}\) is sufficiently saturated, we may take an
  elementary embedding of \(C\) into \(\mathcal{U}\), and thus view
  \(C\) as a set of parameters in \(\mathcal{U}\).  For any \(f \in
  Aut(\mathcal{U})\), by identifying \(C\) with \(C_1\) and \(f(C)\)
  with \(C_2\), two disjoint copies of \(C\), we may view
  \(\tp(C,f(C)) \in S(T \cup C_1 \cup C_2)\).  Define the bijection
  arising from this type (in the sense of
  Lemma~\ref{lemma-galoisbijection}) to be \(\Phi(f)\).

  Since \(\Phi\) is really a proxy for viewing how elements of
  \(Aut(\mathcal{U})\) permute equivalence classes, it is immediate
  that \(\Phi\) is a group homomorphism and that \(\ker(\Phi) =
  Fix(E)\).  \(\Phi\) is surjective because \(\mathcal{U}\) is
  sufficiently homogeneous.
\end{proof}

\end{document}
